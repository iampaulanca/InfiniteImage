<p id="notice"><%= notice %></p>

<h1>Team06</h1>

<table>
  <thead>
  <tr>
    <!--      <th>Img ID</th>-->
    <th>Image Status</th>
    <th>Image title</th>
    <th>Category</th>
    <!--      <th>Licensing</th>-->
    <th>Date</th>
    <th>Description</th>
    <!--      <th>File type</th>-->
    <!--      <th>Location</th>-->
    <th>Image</th>
    <th colspan="3"></th>
  </tr>
  </thead>

  <tbody>
  <% @images.each do |image| %>
    <tr>
      <!--        <td><%#= image.image_owner_id %></td>-->
      <td><%= image.status.name %></td>
      <td><%= image.image_title %></td>
      <td><%= image.category.name %></td>
      <!--        <td><%#= image.licensing %></td>-->
      <td><%= image.date %></td>
      <td><%= image.description %></td>
      <!--        <td><%#= image.file_type %></td>-->
      <!--        <td><%#= image.location %></td>-->
      <td>
        <% image.uploads.each do |upload| %>
          <%= link_to (image_tag upload, size: '50x50'), image %>
        <% end %>
      </td>
      <td><%= link_to 'Show', image %></td>
      <td><%= link_to 'Edit', edit_image_path(image) %></td>
      <td><%= link_to 'Destroy', image, method: :delete, data: {confirm: 'Are you sure?'} %></td>
    </tr>
  <% end %>
  </tbody>
</table>


<!--# Author: Paul Ancajima-->
<!--# Purpose: Search algorithm-->
<!--# Algoritm: if no hits-->
<!--              display message no results with featured images-->
<!--            else-->
<!--              display how many images are shown with images-->
<!--(Maybe show how many of that category and how many on the page?)-->
<!--# Date: 7/27/18-->
<p>
  <%= render 'images/search_images', image: @image %>

  <b>searchkick</b>
  <small>
    <% if @imagesearch.total_count == 0 %>
     <br>There were no results please try another search.<br>
      <br> displaying some images <br>
      <% @images.each do |image| %>
        <% image.uploads.each do |upload| %>
          <%= link_to (image_tag upload, size: '50x50'), image %>
        <% end %>
      <% end %>
    <% else %>
      Showing <%= @imagesearch.total_count %> out of <%= @images.count %>
      <% @imagesearch.each do |i| %>
        <% i.uploads.each do |upload| %>
          <%= link_to (image_tag upload, size: '50x50'), i %>
        <% end %>
      <% end %>
    <% end %>
    <i>
      <% if @imagesearch.suggestions.any? %>
        Did you mean: <%= @imagesearch.suggestions.first %> ?
        Maybe try other categories or none.
      <% end %>
    </i>
  </small>

  <br><br>
  <br><b>ransack</b>

  <small>
  <% if @images.count == 0 %>
  <p style="text-align: center">Sorry we were not able to find what you were looking for, here are some of our
    favorites!</p>
  <% @images = Image.all %>
<% end %>
<!------- if no images found during search ----------->
    <!-- Loop through each picture and assign each to bootstrap class. Will need to limit these and not show whole db -->
    <% @images.shuffle.each do |image| %>
      <% image.uploads.each do |upload| %>
        <% if image.status_id == 1 %>
            <%= link_to (image_tag upload, size: '50x50'), image, target: :_blank %>
        <% end %>
      <% end %>
    <% end %>
</p>
</small>
<br>


<%# @images.shuffle.each do |image| %>
<%# (0 ... image.uploads.count).each do |thumb| %>
<%#= link_to (image_tag image.thumbnail(thumb)), image, style: 'background-color: transparent' %>
<%# end  %>
<%# end %>
<%#= link_to 'New Image', new_image_path %>
